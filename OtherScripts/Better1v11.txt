settings
{
	main
	{
		Description: "Just ask in chat if you can be boss, and I'll try to get you in :)"
	}

	lobby
	{
		Allow Players Who Are In Queue: Yes
		Map Rotation: After A Game
		Match Voice Chat: Enabled
		Max Spectators: 4
		Max Team 1 Players: 11
		Max Team 2 Players: 1
		Return To Lobby: Never
		Team Balancing: After A Game
		Use Experimental Update If Available: Yes
	}

	modes
	{
		Team Deathmatch
		{
			enabled maps
			{
				Workshop Chamber
			}
		}

		General
		{
			Game Length In Minutes: 15
			Game Mode Start: Immediately
			Health Pack Respawn Time Scalar: 500%
			Hero Limit: Off
			Imbalanced Team Score To Win: On
			Self Initiated Respawn: Off
			Team 1 Score To Win: 1
			Team 2 Score To Win: 200
		}
	}

	heroes
	{
		Team 1
		{
			Healing Dealt: 150%

			Ashe
			{
				Movement Speed: 200%
			}

			Brigitte
			{
				Shield Bash Cooldown Time: 150%
			}

			D.Va
			{
				Boosters Cooldown Time: 0%
				Defense Matrix Maximum Time: 20%
				Defense Matrix Recharge Rate: 500%
				Micro Missiles Cooldown Time: 0%
				Ultimate Generation - Combat Self-Destruct: 500%
				Ultimate Generation - Passive Self-Destruct: 500%
				Ultimate Generation Self-Destruct: 500%
			}

			Doomfist
			{
				Rising Uppercut Cooldown Time: 75%
				Rocket Punch Cooldown Time: 75%
				Seismic Slam Cooldown Time: 75%
				Ultimate Generation - Combat Meteor Strike: 150%
			}

			Genji
			{
				Damage Dealt: 95%
				Ultimate Duration: 225%
				Ultimate Generation - Combat Dragonblade: 300%
			}

			Mei
			{
				Blizzard Freeze Minimum: 0%
				Weapon Freeze Duration Scalar: 75%
				Weapon Freeze Minimum: 0%
			}

			Reinhardt
			{
				Ultimate Generation - Combat Earthshatter: 500%
			}

			Roadhog
			{
				Whole Hog Knockback Scalar: 200%
			}

			Sigma
			{
				Damage Dealt: 108%
				Damage Received: 88%
				Experimental Barrier Recharge Rate: 500%
				Ultimate Generation - Combat Gravitic Flux: 80%
				Ultimate Generation - Passive Gravitic Flux: 60%
			}

			Soldier: 76
			{
				Helix Rockets Cooldown Time: 0%
				Ultimate Duration: 180%
				Ultimate Generation - Combat Tactical Visor: 250%
				Ultimate Generation - Passive Tactical Visor: 250%
				Ultimate Generation Tactical Visor: 250%
			}

			Sombra
			{
				Hack Cooldown Time: 150%
				Ultimate Generation - Combat EMP: 25%
			}

			Symmetra
			{
				Sentry Turret Cooldown Time: 0%
				Spawn With Ultimate Ready: On
				Teleporter Cooldown Time: 0%
			}

			Tracer
			{
				Blink Cooldown Time: 75%
			}

			Widowmaker
			{
				Damage Dealt: 250%
			}

			Wrecking Ball
			{
				Adaptive Shield Cooldown Time: 200%
				Piledriver Cooldown Time: 0%
			}
		}

		Team 2
		{
			Damage Received: 35%
			Healing Dealt: 200%
			Healing Received: 200%
			Health: 500%
			Movement Speed: 151%

			Ana
			{
				Ammunition Clip Size Scalar: 500%
				Biotic Grenade Cooldown Time: 25%
				Sleep Dart Cooldown Time: 25%
				Ultimate Generation - Combat Nano Boost: 500%
			}

			Ashe
			{
				Ammunition Clip Size Scalar: 500%
				Coach Gun Cooldown Time: 25%
				Coach Gun Knockback Scalar Enemy: 300%
				Coach Gun Knockback Scalar Self: 75%
				Dynamite Cooldown Time: 25%
				Dynamite Fuse Time Scalar: 500%
				Infinite Ultimate Duration: On
				Movement Speed: 200%
				Spawn With Ultimate Ready: On
				Ultimate Duration: 500%
				Ultimate Generation - Combat B.O.B.: 275%
				Ultimate Generation - Passive B.O.B.: 25%
				Ultimate Generation B.O.B.: 50%
			}

			Baptiste
			{
				Ammunition Clip Size Scalar: 500%
				Immortality Field Cooldown Time: 500%
				Secondary Fire: Off
				Ultimate Duration: 500%
				Ultimate Generation - Combat Amplification Matrix: 500%
			}

			Bastion
			{
				Ammunition Clip Size Scalar: 500%
				Configuration: Tank Weapon Knockback Scalar: 400%
				Jump Vertical Speed: 86%
				Movement Speed: 94%
				Projectile Speed: 84%
				Self-Repair Maximum Time: 500%
				Self-Repair Recharge Rate: 20%
				Ultimate Duration: 500%
				Ultimate Generation - Combat Configuration: Tank: 500%
			}

			Brigitte
			{
				Barrier Shield Cooldown Time: 25%
				Barrier Shield Recharge Rate: 1%
				Repair Pack: Off
				Shield Bash Cooldown Time: 200%
				Shield Bash Knockback Scalar: 300%
				Ultimate Generation - Combat Rally: 80%
				Ultimate Generation - Passive Rally: 2%
				Ultimate Generation Rally: 10%
				Whip Shot Cooldown Time: 25%
				Whip Shot Knockback Scalar: 300%
			}

			D.Va
			{
				Boosters Cooldown Time: 0%
				Boosters Knockback Scalar: 400%
				Call Mech Knockback Scalar: 400%
				Defense Matrix Maximum Time: 20%
				Defense Matrix Recharge Rate: 500%
				Micro Missiles Cooldown Time: 0%
				Movement Speed: 175%
				Self Destruct Knockback Scalar: 200%
				Ultimate Generation - Combat Self-Destruct: 500%
				Ultimate Generation - Passive Self-Destruct: 500%
				Ultimate Generation Self-Destruct: 500%
			}

			Doomfist
			{
				Ammunition Clip Size Scalar: 500%
				Ammunition Regeneration Time Scalar: 75%
				Meteor Strike Knockback Scalar: 300%
				Rising Uppercut Cooldown Time: 75%
				Rising Uppercut Knockback Scalar: 300%
				Rocket Punch Cooldown Time: 75%
				Rocket Punch Knockback Scalar: 300%
				Seismic Slam Cooldown Time: 75%
				Ultimate Duration: 25%
				Ultimate Generation - Combat Meteor Strike: 150%
			}

			Echo
			{
				Ammunition Clip Size Scalar: 500%
				Damage Dealt: 300%
				Flight Cooldown Time: 20%
				Focusing Beam Cooldown Time: 50%
				Health: 500%
				Movement Gravity: 400%
				Spawn With Ultimate Ready: On
				Sticky Bombs Cooldown Time: 50%
				Ultimate Generation - Combat Duplicate: 10%
				Ultimate Generation - Passive Duplicate: 10%
				Ultimate Generation Duplicate: 10%
			}

			Genji
			{
				Ammunition Clip Size Scalar: 500%
				Damage Dealt: 105%
				Deflect Cooldown Time: 75%
				Swift Strike Cooldown Time: 150%
				Ultimate Duration: 225%
				Ultimate Generation - Combat Dragonblade: 200%
			}

			Hanzo
			{
				Lunge Cooldown Time: 50%
				Sonic Arrow Cooldown Time: 25%
				Storm Arrows Cooldown Time: 25%
				Storm Arrows Quantity: 12
				Ultimate Generation - Combat Dragonstrike: 500%
			}

			Junkrat
			{
				Ammunition Clip Size Scalar: 500%
				Concussion Mine Knockback Scalar: 200%
				Frag Launcher Knockback Scalar: 400%
				Infinite Ultimate Duration: On
				Steel Trap Cooldown Time: 25%
				Ultimate Generation - Combat RIP-Tire: 500%
			}

			LÃºcio
			{
				Ammunition Clip Size Scalar: 500%
				Soundwave Cooldown Time: 25%
				Soundwave Knockback Scalar: 300%
			}

			McCree
			{
				Ammunition Clip Size Scalar: 500%
				Combat Roll Cooldown Time: 50%
				Flashbang Cooldown Time: 25%
				Ultimate Generation - Combat Deadeye: 500%
			}

			Mei
			{
				Ammunition Clip Size Scalar: 500%
				Blizzard Freeze Minimum: 0%
				Blizzard Freeze Rate Scalar: 500%
				Damage Dealt: 300%
				Freeze Stacking: On
				Health: 500%
				Ice Wall Cooldown Time: 75%
				Movement Speed: 120%
				Ultimate Generation - Combat Blizzard: 200%
				Weapon Freeze Duration Scalar: 20%
				Weapon Freeze Minimum: 0%
				Weapon Freeze Rate Scalar: 500%
			}

			Mercy
			{
				Ammunition Clip Size Scalar: 500%
				Damage Dealt: 118%
				Damage Received: 84%
				Guardian Angel: Off
				Movement Speed: 112%
				Resurrect: Off
				Ultimate Generation - Combat Valkyrie: 500%
				Ultimate Generation - Passive Valkyrie: 500%
				Weapons Enabled: Caduceus Blaster Only
			}

			Moira
			{
				Biotic Energy Maximum: 500%
				Biotic Energy Recharge Rate: 0%
				Biotic Orb Cooldown Time: 10%
				Biotic Orb Max Damage Scalar: 500%
				Biotic Orb Max Healing Scalar: 10%
				Fade Cooldown Time: 200%
				Primary Fire: Off
				Ultimate Generation - Combat Coalescence: 250%
			}

			Orisa
			{
				Ammunition Clip Size Scalar: 500%
				Fortify Cooldown Time: 25%
				Halt! Cooldown Time: 25%
				Protective Barrier Cooldown Time: 500%
				Ultimate Generation - Combat Supercharger: 500%
			}

			Pharah
			{
				Ammunition Clip Size Scalar: 500%
				Concussive Blast Cooldown Time: 25%
				Concussive Blast Knockback Scalar: 300%
				Hover Jets Maximum Time: 500%
				Hover Jets Recharge Rate: 50%
				Hover Jets Vertical Speed Scalar: 75%
				Jump Jet Acceleration Scalar: 75%
				Jump Jet Cooldown Time: 25%
				Rocket Launcher Knockback Scalar: 400%
				Ultimate Generation - Combat Barrage: 500%
			}

			Reaper
			{
				Ammunition Clip Size Scalar: 500%
				Shadow Step Cooldown Time: 150%
				Ultimate Generation - Passive Death Blossom: 50%
				Ultimate Generation Death Blossom: 50%
				Wraith Form Cooldown Time: 150%
			}

			Reinhardt
			{
				Barrier Field Cooldown Time: 25%
				Charge Cooldown Time: 25%
				Charge Knockback Scalar: 300%
				Fire Strike Cooldown Time: 25%
				Rocket Hammer Knockback Scalar: 400%
				Ultimate Generation - Combat Earthshatter: 500%
			}

			Roadhog
			{
				Ammunition Clip Size Scalar: 500%
				Chain Hook Cooldown Time: 25%
				Ultimate Generation - Combat Whole Hog: 500%
				Whole Hog Knockback Scalar: 200%
			}

			Sigma
			{
				Accretion Knockback Scalar: 300%
				Damage Dealt: 200%
				Damage Received: 88%
				Experimental Barrier Cooldown Time: 0%
				Experimental Barrier Recharge Rate: 500%
				Kinetic Grasp Cooldown Time: 75%
				Ultimate Generation - Combat Gravitic Flux: 80%
				Ultimate Generation - Passive Gravitic Flux: 80%
			}

			Soldier: 76
			{
				Ammunition Clip Size Scalar: 500%
				Helix Rockets Cooldown Time: 0%
				Helix Rockets Knockback Scalar: 400%
				Ultimate Duration: 300%
				Ultimate Generation - Combat Tactical Visor: 250%
				Ultimate Generation - Passive Tactical Visor: 250%
				Ultimate Generation Tactical Visor: 250%
			}

			Sombra
			{
				Ammunition Clip Size Scalar: 500%
				Hack Cooldown Time: 150%
				Stealth Cooldown Time: 500%
				Ultimate Generation - Combat EMP: 500%
			}

			Symmetra
			{
				Ammunition Clip Size Scalar: 500%
				Sentry Turret Cooldown Time: 0%
				Spawn With Ultimate Ready: On
				Teleporter Cooldown Time: 0%
				Ultimate Generation - Combat Photon Barrier: 250%
			}

			TorbjÃ¶rn
			{
				Ammunition Clip Size Scalar: 500%
				Deploy Turret Cooldown Time: 0%
				Health: 500%
				Infinite Ultimate Duration: On
				Overload Duration Scalar: 60%
				Spawn With Ultimate Ready: On
				Ultimate Duration: 500%
				Ultimate Generation - Combat Molten Core: 500%
			}

			Tracer
			{
				Ammunition Clip Size Scalar: 500%
				Blink Cooldown Time: 0%
				Recall Cooldown Time: 250%
				Ultimate Generation - Combat Pulse Bomb: 500%
			}

			Widowmaker
			{
				Ammunition Clip Size Scalar: 500%
				Damage Dealt: 250%
				Grappling Hook Cooldown Time: 25%
				Ultimate Duration: 500%
				Ultimate Generation - Combat Infra-Sight: 500%
				Venom Mine Cooldown Time: 25%
			}

			Winston
			{
				Ammunition Clip Size Scalar: 500%
				Barrier Projector Cooldown Time: 250%
				Jump Pack Cooldown Time: 50%
				Jump Pack Knockback Scalar: 400%
				Primal Rage Melee Knockback Scalar: 300%
				Ultimate Duration: 25%
			}

			Wrecking Ball
			{
				Adaptive Shield Cooldown Time: 200%
				Ammunition Clip Size Scalar: 500%
				Grappling Claw Cooldown Time: 25%
				Grappling Claw Knockback Scalar: 400%
				Infinite Ultimate Duration: On
				Minefield Knockback Scalar: 400%
				Piledriver Cooldown Time: 0%
				Ultimate Generation - Combat Minefield: 500%
			}

			Zarya
			{
				Ammunition Clip Size Scalar: 500%
				Particle Barrier Cooldown Time: 250%
				Particle Cannon Secondary Knockback Scalar: 400%
				Projected Barrier: Off
				Ultimate Generation - Combat Graviton Surge: 250%
			}

			Zenyatta
			{
				Ammunition Clip Size Scalar: 500%
				Orb of Harmony: Off
				Ultimate Generation - Combat Transcendence: 80%
				Ultimate Generation - Passive Transcendence: 4%
				Ultimate Generation Transcendence: 40%
			}

			disabled heroes
			{
				Ashe
			}
		}

		General
		{
			Damage Dealt: 250%
			No Ammunition Requirement: On
			Spawn With Ultimate Ready: On
			Ultimate Generation: 500%
			Ultimate Generation - Combat: 500%
			Ultimate Generation - Passive: 500%

			disabled heroes
			{
				D.Va
				Echo
			}
		}
	}
}

variables
{
	global:
		6: Blacklist
		7: DevModeEngaged
		8: CountdownTimer

	player:
		1: BossDmg
		2: BossSpeed
		3: BossDmgRecieved
}

subroutines
{
	0: RestartGame
}

rule("Initialize game")
{
	event
	{
		Ongoing - Global;
	}

	actions
	{
		Disable Built-In Game Mode Scoring;
		Create Progress Bar HUD Text(Filtered Array(All Players(All Teams), Number Of Players(Team 2) > 0 && Global.CountdownTimer > 0), 100 * Normalized Health(
			Players In Slot(0, Team 2)), Custom String("Boss Health: {0} / {1} -- Dmg {2}", Round To Integer(Health(Players In Slot(0,
			Team 2)), Up), Round To Integer(Max Health(Players In Slot(0, Team 2)), Up), Players In Slot(0, Team 2).BossDmg), Top, 2,
			Color(Red), Color(Red), Visible To and Values, Default Visibility);
		Chase Global Variable At Rate(CountdownTimer, 0, 1, None);
		Create Progress Bar HUD Text(Filtered Array(All Players(All Teams), Global.CountdownTimer > 0), Global.CountdownTimer / 0.050,
			Custom String("Press {0} If You Want To Be Next Boss", Input Binding String(Button(Interact))), Top, 3, Color(Red), Color(Red),
			Visible To and Values, Default Visibility);
	}
}

disabled rule("Game Framework")
{
	event
	{
		Ongoing - Global;
	}
}

disabled rule("spawn as random heroes")
{
	event
	{
		Ongoing - Each Player;
		Team 1;
		All;
	}

	conditions
	{
		Has Spawned(Event Player) == True;
	}

	actions
	{
		Start Forcing Player To Be Hero(Event Player, Random Value In Array(All Heroes));
	}
}

rule("Boss Killed")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Count Of(All Dead Players(All Teams)) > 0;
		Is Game In Progress == True;
	}

	actions
	{
		Call Subroutine(RestartGame);
	}
}

rule("Boss Wins")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Team Score(Team 2) == 100;
	}

	actions
	{
		Call Subroutine(RestartGame);
	}
}

rule("Sub0: RestartGame - Restart game after it ends")
{
	event
	{
		Subroutine;
		RestartGame;
	}

	actions
	{
		Disable Game Mode HUD(All Players(All Teams));
		Global.CountdownTimer = 5;
		Set Slow Motion(33);
		"Actually 15 seconds because of slow-mo"
		Wait(5, Ignore Condition);
		Set Slow Motion(100);
		Set Team Score(Team 1, 0);
		Set Team Score(Team 2, 0);
		Go To Assemble Heroes;
		Enable Game Mode HUD(All Players(All Teams));
	}
}

rule("Respawn when killed as random hero")
{
	event
	{
		Player Died;
		Team 1;
		All;
	}

	conditions
	{
		Is Dead(Event Player) == True;
	}

	actions
	{
		Wait(2, Ignore Condition);
		"Don't respawn player fast if a teammate mercy is looking at them"
		Abort If(Count Of(Filtered Array(Players On Hero(Hero(Mercy), Team 1), Angle Between Vectors(Facing Direction Of(
			Current Array Element), Direction Towards(Position Of(Current Array Element), Position Of(Event Player)))
			< 15 && Current Array Element != Event Player)) > 0);
		Respawn(Event Player);
		Wait(0.250, Ignore Condition);
		Start Forcing Player To Be Hero(Event Player, Random Value In Array(All Heroes));
	}
}

rule("match time = 1 while assembling heros")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Is Assembling Heroes == True;
	}

	actions
	{
		Set Match Time(1);
	}
}

rule("match time = 1800 when game in progress")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Is Game In Progress == True;
	}

	actions
	{
		Set Match Time(1800);
	}
}

rule("Increase Boss Score when they get a kill")
{
	event
	{
		Player Died;
		Team 1;
		All;
	}

	actions
	{
		Modify Team Score(Team 2, Score Of(Event Player) + 1);
	}
}

rule("The boss leave")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Number Of Players(Team 1) > 1;
	}

	actions
	{
		Wait(60, Ignore Condition);
		If(Number Of Players(Team 2) == 0);
			Set Team Score(Team 1, 1);
		End;
	}
}

disabled rule("Non-Boss Player HUD")
{
	event
	{
		Ongoing - Each Player;
		Team 1;
		All;
	}

	conditions
	{
		Has Spawned(Players In Slot(0, Team 2)) == True;
		Is Dummy Bot(Event Player) == False;
	}

	actions
	{
		disabled Create HUD Text(Event Player, String("Life"), Hero Of(Players In Slot(0, Team 2)), Health(Players In Slot(0, Team 2)), Top, 0,
			Color(Red), Color(Red), Color(White), Visible To and String, Default Visibility);
		disabled Create HUD Text(Event Player, Custom String("Damage dealt"), Hero Of(Players In Slot(0, Team 2)), Players In Slot(0, Team 2)
			.BossDmg, Right, 0, Color(Red), Color(Red), Color(White), Visible To and String, Default Visibility);
		disabled Create HUD Text(Event Player, String("Speed"), Hero Of(Players In Slot(0, Team 2)), Players In Slot(0, Team 2).BossSpeed, Left, 0,
			Color(Red), Color(Red), Color(White), Visible To and String, Default Visibility);
		disabled Create Progress Bar HUD Text(Event Player, 100 * Normalized Health(Players In Slot(0, Team 2)), Custom String(
			"Boss Health: {0} / {1}", Round To Integer(Health(Players In Slot(0, Team 2)), Up), Round To Integer(Max Health(
			Players In Slot(0, Team 2)), Up)), Left, 0, Color(White), Color(White), Visible To Values and Color, Default Visibility);
	}
}

disabled rule("Boss Modifiers")
{
	event
	{
		Ongoing - Global;
	}
}

rule("Initialize Boss")
{
	event
	{
		Ongoing - Each Player;
		Team 2;
		All;
	}

	conditions
	{
		Has Spawned(Event Player) == True;
	}

	actions
	{
		"Initialize Boss Damage"
		Event Player.BossDmg = Random Integer(99, 200);
		Start Scaling Player(Event Player, 3, True);
		Disable Built-In Game Mode Respawning(Event Player);
		Set Max Health(Event Player, Absolute Value(10000));
		Heal(Event Player, Null, 10000);
		Set Healing Received(Players On Hero(Hero(Winston), Team 2), 0.100);
		disabled Create Progress Bar In-World Text(All Players(Team 1), Normalized Health(Event Player) * 100, Custom String("{0} / {1}",
			Round To Integer(Health(Event Player), Up), Round To Integer(Max Health(Event Player), Up)), Event Player, 1.500, Do Not Clip,
			Color(White), Color(Red), Visible To Position Values and Color, Default Visibility);
	}
}

rule("boss damage 2")
{
	event
	{
		Ongoing - Each Player;
		Team 2;
		All;
	}

	actions
	{
		Wait(1, Ignore Condition);
		Event Player.BossDmg = Event Player.BossDmg + Random Real(0.250, 6);
		Set Damage Dealt(Event Player, Event Player.BossDmg);
		Loop;
	}
}

rule("boss damage reciev 100")
{
	event
	{
		Ongoing - Each Player;
		Team 2;
		All;
	}

	conditions
	{
		Event Player.BossDmgRecieved < 100;
	}

	actions
	{
		Event Player.BossDmgRecieved = 100;
		Wait(0.001, Ignore Condition);
		Loop If Condition Is True;
	}
}

rule("boss killing makes them weaker?")
{
	event
	{
		Player Dealt Final Blow;
		Team 2;
		All;
	}

	actions
	{
		Event Player.BossDmg = Event Player.BossDmg + Random Real(-0.250, -12);
		Event Player.BossSpeed = Event Player.BossSpeed + Random Real(2, 0.125);
	}
}

rule("boss damage reciev")
{
	event
	{
		Ongoing - Each Player;
		Team 2;
		All;
	}

	actions
	{
		Set Damage Received(Event Player, Event Player.BossDmgRecieved);
		Wait(1, Ignore Condition);
		Loop;
	}
}

disabled rule("Hero Modifiers")
{
	event
	{
		Ongoing - Global;
	}
}

rule("winston 1")
{
	event
	{
		Ongoing - Each Player;
		Team 2;
		Winston;
	}

	conditions
	{
		Ultimate Charge Percent(Event Player) == 100;
	}

	actions
	{
		Set Healing Received(Event Player, 0.001);
	}
}

rule("winston 2")
{
	event
	{
		Ongoing - Each Player;
		Team 2;
		Winston;
	}

	conditions
	{
		Ultimate Charge Percent(Event Player) != 100;
	}

	actions
	{
		Set Healing Received(Event Player, 100);
	}
}

rule("d.va part 1")
{
	event
	{
		Ongoing - Each Player;
		Team 2;
		D.Va;
	}

	conditions
	{
		Has Spawned(Event Player) == True;
	}

	actions
	{
		Event Player.A = 0;
	}
}

rule("d.va part 2")
{
	event
	{
		Ongoing - Each Player;
		Team 2;
		D.Va;
	}

	conditions
	{
		Is Button Held(Event Player, Button(Ultimate)) == True;
	}

	actions
	{
		Event Player.A = Event Player.A + 1;
		Wait(1, Ignore Condition);
	}
}

rule("d.va part 3")
{
	event
	{
		Ongoing - Each Player;
		Team 2;
		D.Va;
	}

	conditions
	{
		Event Player.A == Absolute Value(2);
	}

	actions
	{
		Set Ultimate Ability Enabled(Event Player, False);
	}
}

rule("sigma ultimate fixing")
{
	event
	{
		Ongoing - Each Player;
		Team 1;
		Sigma;
	}

	conditions
	{
		Is Using Ultimate(Event Player) == True;
	}

	actions
	{
		Set Damage Dealt(Event Player, 20);
		Wait Until(!Is Using Ultimate(Event Player), 8);
		Set Damage Dealt(Event Player, 100);
	}
}

disabled rule("Blacklist testing rule")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Has Spawned(Event Player) == True;
		Is Dummy Bot(Event Player) == False;
	}

	actions
	{
		Create Dummy Bot(Hero(Roadhog), Team 2, -1, Vector(0, 0, 0), Vector(0, 0, 0));
		Create Dummy Bot(Hero(Orisa), Team 1, -1, Vector(0, 0, 0), Vector(0, 0, 0));
	}
}

rule("Blacklist")
{
	event
	{
		Ongoing - Global;
	}

	actions
	{
		Global.Blacklist = Array(Custom String("Mosquito"));
		disabled Create HUD Text(Host Player, Custom String("Interact + Left Click on player to blacklist them"), Null, Null, Right, 9, Color(Red),
			Color(White), Color(White), Visible To and String, Default Visibility);
	}
}

rule("Interact + left click on player to add them to blacklist")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player == Host Player;
		Is Button Held(Event Player, Button(Interact)) == True;
		Is Button Held(Event Player, Button(Primary Fire)) == True;
	}

	actions
	{
		Event Player.E = Ray Cast Hit Player(Eye Position(Event Player), Eye Position(Event Player) + Facing Direction Of(Event Player)
			* 60, All Players(All Teams), Event Player, False);
		If(Event Player.E == Null);
			Small Message(Event Player, Custom String("Interact + Left Click on a player to blacklist them!"));
		Else;
			Small Message(Event Player, Custom String("Player {0} selected for blacklisting. Press R within 5 sec to blacklist them.",
				Event Player.E));
			Event Player.F = 0;
			Chase Player Variable At Rate(Event Player, F, 9999, 1, Destination and Rate);
			Wait Until(Is Button Held(Event Player, Button(Reload)), 5);
			Stop Chasing Player Variable(Event Player, F);
			If(Event Player.F >= 5);
				Small Message(Event Player, Custom String("Blacklisting aborted (5 sec timeout)"));
				Abort;
			Else;
				Modify Global Variable(Blacklist, Append To Array, Custom String("{0}", Event Player.E));
				Small Message(Event Player, Custom String("{0} blacklisted.", Event Player.E));
			End;
		End;
	}
}

rule("Blacklist enforcement")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Array Contains(Global.Blacklist, Custom String("{0}", Event Player)) == True;
	}

	actions
	{
		Remove Player(Event Player);
	}
}

rule("Host Dev Testing Mode = Interact + Hello")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Host Player == Event Player;
		Is Button Held(Event Player, Button(Interact)) == True;
		disabled Is Communicating(Event Player, Hello) == True;
		Is Button Held(Event Player, Button(Jump)) == True;
	}

	actions
	{
		Create Dummy Bot(Hero(Tracer), Team 2, 0, Vector(0, 0, 0), Vector(0, 0, 0));
		Create Dummy Bot(Hero(Orisa), Team 1, -1, Vector(10, 0, 0), Vector(0, 0, 0));
		Global.DevModeEngaged = True;
	}
}

rule("Dev mode melee = instakill")
{
	event
	{
		Player Dealt Damage;
		All;
		All;
	}

	conditions
	{
		Is Meleeing(Attacker) == True;
		Global.DevModeEngaged == True;
		Attacker != Victim;
	}

	actions
	{
		Small Message(All Players(All Teams), Custom String("melee"));
		Kill(Victim, Attacker);
	}
}